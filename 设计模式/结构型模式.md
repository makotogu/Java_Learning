# 结构型模式
结构型模式描述如何将类或对象按照某种布局组成更大的结构，它分为类结构型模式和对象结构型模式，前者采用继承机制来组织接口和类，后者采用组合或聚合来组合对象。
由于组合关系或聚合关系比继承关系耦合度低，满足合成复用原则，所以对象结构模式比类结构型模式具有更大的灵活性。

# 代理模式
## 概述
由于某些原因需要给某对象提供个代理以控制对象的访问，这时，访问对象不适合活着不能直接引用目标对象，代理对象作为访问对象和目标对象之间的中介。
Java中的代理按照代理类生成世纪不同又分为静态代理和动态代理。静态代理代理类在编译期就已经生成，而动态代理代理类则是在Java运行时动态生成。动态代理又有JDK和CGlib两种。
## 结构
代理(Proxy)模式分为三种角色：
* 抽象主题(Subject)类：通过接口或抽象类声明真实主题和代理对象实现的业务方法。
* 真实主题(Real Subject)类：实现了抽象主题中的具体业务，是代理对象所表达的真实对象，是最终要引用的对象。
* 代理(Proxy)类：提供了与真实主题相同的接口，其内部含有对真实主题的引用，它可以访问、控制或者扩展真是主题的功能。
## 静态代理
【案例】火车站卖票
如果买火车票，需要去火车站买票，要到火车站，再进行一系列操作。而火车站在多个地方都有代售点，我们去代售点买票就方便很多，火车站是目标对象，代售点是代理对象。
测试类直接访问ProxyPoint对象，也就是ProxyPoint作为访问对象和目标对象的中介。同时也对sell方法进行了增强。
## JDK动态代理
Java中提供了动态代理Proxy，Proxy不是上述的代理对象的类，而是提供了一个创建对象的静态方法(newProxyInstance方法)获取代理对象

<font color="lightblue">使用了动态代理，我们思考一下的问题</font>

* ProxyFactory是代理类嘛？
  
  * ProxyFactory不是代理模式中的代理类，而代理类是程序在运行过程中动态在内存中生成的类。通过Java开源诊断工具查看代理类的结构。
    > 代理类($Proxy0)实现了SellTickets，这就印证了我们之前说的真实类和代理类实现同样的接口
    > 代理类(Proxy0)将我们提供了的匿名内部类对象传递给了父亲

* 动态代理的执行流程是什么样？